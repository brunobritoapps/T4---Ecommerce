<?phprequire_once ("php/services/geral/paginas.php");$obj = new paginas();$menu = $obj->getPaginas();$permProj = array();$pagPerm = $obj->getPaginaPerm($_SESSION["s_usuario"], $_SESSION["s_conta"]);$pagPermIndex = array();for ($i = 0; $i < count($pagPerm); $i++) {    $pagPermIndex[$pagPerm[$i]->id_permissao] = 1;}$menuIndex = array();foreach ($menu as $value) {    if (isset($permProj[$value->permissao])) {        $value->projetos = $permProj[$value->permissao];    }    $menuIndex[$value->permissao] = $value;}function imprimeMenu($statusMenu) {    global $menu;    $retorno = array();    foreach ($menu as $key => $value) {        if ($value->nivel === null || verificaCondicoes($value->permissao) == "") {            continue;        }        $tempObj = $value;        $tempObj->_statusMenu = 0;        for ($i = 0; $i < count($statusMenu); $i++) {            if ($statusMenu[$i]->permissao == $value->permissao) {                $tempObj->_statusMenu = 1;            }        }        $tempObj->acao = $value->local != "" ? 1 : 0;        $retorno[] = $tempObj;    }    return $retorno;}function verificaCondicoes($permissao) {    global $menuIndex;    global $pagPermIndex;    $obj = isset($menuIndex[$permissao]) ? $menuIndex[$permissao] : "";    if ($obj == "") {        return "";    } else {        session_start();        if (($obj->verificar == 1 && $pagPermIndex[$obj->id] != 1)) {            return "";        }    }    return $obj;}function statusMenu($permissao) {    global $menuIndex;    global $menu;    $retorno = array();    $obj = isset($menuIndex[$permissao]) ? $menuIndex[$permissao] : "";    if ($obj != "") {        while (true) {            $retorno[] = clone $obj;            if (isset($obj->pai) && $obj->pai != null && $obj->pai != "") {                $obj = $menu[$obj->pai];            } else {                break;            }        }    }    return $retorno;}?>